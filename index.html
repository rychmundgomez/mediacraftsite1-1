<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Ultimate Resource</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">

  <!-- Inline SVG favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='18' fill='%23345b63'/%3E%3Ctext x='50' y='58' font-size='48' text-anchor='middle' fill='%23fff' font-family='Poppins,Arial' font-weight='700'%3EM%3C/text%3E%3C/svg%3E">

  <meta name="description" content="The Ultimate Resource — crafted design, film, audio and product experiences. Reimagined single-page UI." />

  <style>
    /* ========================== 
       Variables & palette
       ========================== */
    :root{
      --bg-1: #0f1720;
      --bg-2: #071027;
      --primary: #ffb703;
      --accent: #00b4d8;
      --muted: #9aa7b2;
      --glass: rgba(255,255,255,0.04);
      --radius: 16px;
      --gap: 18px;
      --ease: cubic-bezier(.2,.9,.25,1);
      --max-width: 1200px;
    }

    /* ==========================
       Reset + base (mobile-first)
       ========================== */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Poppins',system-ui,-apple-system,'Segoe UI',Roboto,Arial;
      color:var(--muted);
      background: linear-gradient(180deg,var(--bg-1) 0%, var(--bg-2) 60%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
      padding:16px;
      overflow-y:overlay;
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; animation: none !important; scroll-behavior: auto !important; }
    }

    /* Visually-hidden (sr-only) */
    .sr-only {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0);
      white-space: nowrap; border: 0;
    }

    /* Container */
    .shell{
      max-width:var(--max-width);
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:24px;
    }

    /* Top navigation (menu removed) */
    .nav{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      padding:10px;border-radius:12px;backdrop-filter:blur(6px);
    }
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--primary)}
    .brand-mark{width:48px;height:48px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#0af);color:#02111a;font-weight:900;font-size:1.05rem}
    /* <-- tiny helper so the provided image fills the mark without changing the rest of your styles --> */
    .brand-mark img{width:100%;height:100%;object-fit:cover;display:block;border-radius:10px;}
    .brand-name{font-weight:700;color:#fff}
    .brand-tag{font-family:'Playfair Display',serif;color:var(--muted);font-style:italic;font-size:0.85rem}

    .nav-actions{display:flex;gap:10px;align-items:center}
    .btn{
      border:0;padding:10px 14px;border-radius:10px;background:var(--primary);color:#071027;font-weight:700;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.4);
    }
    .ghost{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.06)}

    /* Hero */
    .hero{
      display:flex;
      flex-direction:column;
      gap:14px;
      padding:18px;border-radius:16px;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.03);
      align-items:flex-start;
    }
    .hero-grid{display:flex;flex-direction:column;gap:12px;flex:1}
    .kicker{font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:1px;font-size:0.78rem}
    h1.title{margin:0;font-family:'Playfair Display',serif;color:#fff;font-weight:700;font-size:clamp(1.35rem,3vw,2.4rem);line-height:1.05}
    p.lead{margin:0;color:var(--muted);max-width:60ch}

    /* Visual stage */
    .visual-stage{position:relative;height:220px;border-radius:12px;overflow:hidden;display:block;flex:1;min-width:200px}
    .layer{
      position:absolute;inset:0;display:grid;place-items:center;pointer-events:none;transition:transform 700ms var(--ease);
      will-change:transform;
    }
    .card-visual{width:86%;max-width:520px;padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));box-shadow:0 20px 60px rgba(0,0,0,0.6);color:#fff}
    .card-visual h3{margin:0 0 6px 0}
    .card-visual p{margin:0;color:var(--muted)}

    /* Core services in hero (mobile carousel, desktop grid) */
    .services{
      display:flex;gap:12px;overflow-x:auto;padding-bottom:8px;-webkit-overflow-scrolling:touch;scroll-snap-type:x mandatory;
      padding-top:6px;
    }
    .svc{min-width:260px;flex:0 0 auto;background:linear-gradient(90deg,rgba(0,180,216,0.06),rgba(255,183,3,0.02));border-radius:12px;padding:14px;color:#fff;scroll-snap-align:center}
    .svc h4{margin:0 0 8px 0}
    .svc p{margin:0;color:var(--muted)}

    /* On wider screens, layout the hero services as a grid for better desktop viewing */
    @media (min-width:720px){
      .services{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;overflow:visible}
    }
    @media (min-width:1080px){
      .services{grid-template-columns:repeat(4,1fr)}
    }

    /* Our Services (How we work) — responsive card grid */
    .services-grid{
      display:grid;
      gap:14px;
      grid-template-columns:repeat(1,1fr);
      margin-top:6px;
    }
    .services-grid .card{
      background:linear-gradient(90deg,rgba(0,180,216,0.04),rgba(255,183,3,0.02));
      padding:16px;border-radius:12px;color:#fff;text-align:left;display:flex;flex-direction:column;gap:8px;
      min-height:120px;
    }
    .services-grid h3{margin:0;color:var(--primary);font-size:1rem}
    .services-grid p{margin:0;color:var(--muted);font-size:0.95rem}

    @media(min-width:720px){
      .services-grid{grid-template-columns:repeat(2,1fr)}
    }
    @media(min-width:1080px){
      .services-grid{grid-template-columns:repeat(3,1fr)}
    }

    /* Mosaic (CSS columns) */
    .mosaic-wrap{column-count:1;column-gap:12px;margin-top:6px}
    .mosaic-card{break-inside:avoid;margin:0 0 12px;border-radius:12px;overflow:hidden;position:relative;background:#0b1b22;border:1px solid rgba(255,255,255,0.03)}
    .mosaic-card img{width:100%;display:block;height:auto;aspect-ratio:16/10;object-fit:cover;vertical-align:top;transition:transform 480ms var(--ease)}
    .mosaic-meta{padding:12px}
    .mosaic-meta h5{margin:0 0 6px 0;color:var(--primary)}
    .mosaic-meta p{margin:0;color:var(--muted)}

    @media(min-width:720px){
      .mosaic-wrap{column-count:2}
    }
    @media(min-width:1080px){
      .mosaic-wrap{column-count:3}
    }

    /* Timeline */
    .timeline{display:flex;flex-direction:column;gap:10px}
    .tl-item{display:flex;gap:12px;align-items:flex-start}
    .tl-bullet{width:14px;height:14px;border-radius:50%;background:var(--accent);flex:0 0 14px;margin-top:6px}
    .tl-body h6{margin:0;font-weight:700;color:#fff}
    .tl-body p{margin:6px 0 0 0;color:var(--muted)}

    /* Footer */
    footer.sitefoot{padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);display:flex;flex-direction:column;gap:12px}
    .contact-row{display:flex;flex-direction:column;gap:8px}
    .micro-form{display:flex;gap:8px}
    .micro-form input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff}

    /* Micro-form small panel style (contained to footer) */
    .micro-form.small-panel{flex-direction:column;max-width:420px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));border-radius:10px}
    .micro-form.small-panel input, .micro-form.small-panel button{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.06)}

    /* Accessibility & focus */
    :focus{outline:none}
    a:focus, button:focus, input:focus {box-shadow:0 0 0 4px rgba(255,183,3,0.12);border-radius:8px}

    /* Reveal initial state */
    .reveal-hidden { transform: translateY(12px); opacity: 0; transition: transform 600ms var(--ease), opacity 540ms var(--ease); }

    .typewriter{display:inline-block;color:var(--primary);font-weight:700}

    /* Helpers */
    .muted{color:var(--muted)}
    .section-head{display:flex;justify-content:space-between;align-items:center;gap:12px}

    /* Page progress */
    .page-progress{
      position:fixed;left:0;right:0;top:0;height:4px;background:linear-gradient(90deg,var(--accent),var(--primary));
      transform-origin:left;transform:scaleX(0);transition:transform 160ms linear; z-index:80;
      border-bottom-left-radius:4px;border-bottom-right-radius:4px;
    }

    /* Small responsive tweaks */
    @media(max-width:520px){
      .brand-mark{width:40px;height:40px;font-size:0.9rem}
      .visual-stage{height:180px}
      .card-visual{width:92%}
    }

    /* Desktop layout improvements */
    @media(min-width:920px){
      .hero{
        flex-direction:row;
        align-items:stretch;
        gap:24px;
        padding:22px;
      }
      .hero-grid{flex:0 0 52%}
      .visual-stage{flex:0 0 48%;height:320px;display:flex;align-items:center;justify-content:center}
      .card-visual{width:92%;max-width:none}
      .section-head{gap:18px}
    }
  </style>
</head>
<body aria-label="MediaCraft reimagined single page">

  <!-- Progress -->
  <div id="progress" class="page-progress" aria-hidden="true"></div>

  <main class="shell" id="main" role="main">

    <!-- Top navigation (menu removed) -->
    <nav class="nav" role="navigation" aria-label="Main navigation">
      <a class="brand" href="#home" aria-label="MediaCraft home">
        <div class="brand-mark" aria-hidden="true">
          <img src="https://i.ibb.co/KYhfdJK/7-D218-D48-FB7-E-4275-B4-E2-A647-CBD9-B3-BB.png" alt="7-D218-D48-FB7-E-4275-B4-E2-A647-CBD9-B3-BB">
        </div>
        <div>
          <div class="brand-name">MediaCraft</div>
          <div class="brand-tag">Build · Brand · Engage</div>
        </div>
      </a>

      <div class="nav-actions" role="group" aria-label="Primary actions">
        <button class="btn" id="hireBtn">Hire a Creator</button>
        <button class="btn ghost" id="portfolioBtn">Portfolio</button>
      </div>
    </nav>

    <!-- Hero -->
    <header class="hero" id="home" aria-labelledby="heroTitle">
      <div class="hero-grid">
        <div class="kicker">The Ultimate Resource</div>
        <h1 id="heroTitle" class="title">Your Digital Command Center For Creative Excellence.</h1>

        <p class="lead"><strong>At The Ultimate Resource,</strong> we turn bold ideas into powerful realities.</p>
        <p class="lead">From sleek websites and standout brands to chart-ready music and marketing that moves people.</p>
        <p class="lead">We connect you with the talent to make it happen. <strong>Your next chapter starts here. Your vision, expertly crafted.</strong></p>
        <p class="lead"><strong>Build | Brand | Engage.</strong></p>

        <p class="lead"><span class="typewriter" aria-hidden="true"></span></p>

        <div class="section-head">
          <strong style="color:#fff">Core Services</strong>
          <small class="muted">Swipe or arrow through</small>
        </div>

        <!-- Core services: mobile carousel, desktop grid (switches via CSS) -->
        <div class="services" role="list" aria-label="Services carousel" aria-roledescription="carousel" tabindex="0">
          <article class="svc" role="listitem" tabindex="0" aria-labelledby="svc1" data-index="0">
            <h4 id="svc1">Brand Strategy</h4>
            <p>Identity systems, tone, and go-to-market craft.</p>
          </article>

          <article class="svc" role="listitem" tabindex="0" aria-labelledby="svc2" data-index="1">
            <h4 id="svc2">Video & Motion</h4>
            <p>Short films, ads, and platform-optimised edits.</p>
          </article>

          <article class="svc" role="listitem" tabindex="0" aria-labelledby="svc3" data-index="2">
            <h4 id="svc3">Audio Production</h4>
            <p>Compositions, sound design and sonic branding.</p>
          </article>

          <article class="svc" role="listitem" tabindex="0" aria-labelledby="svc4" data-index="3">
            <h4 id="svc4">Product Design</h4>
            <p>UX/UI, prototypes and interaction systems.</p>
          </article>
        </div>
      </div>

      <div class="visual-stage" aria-hidden="true">
        <div class="layer" style="transform:translate3d(-8px,-8px,0) scale(1.00)">
          <div class="card-visual">
            <h3>Studio Snapshot</h3>
            <p>Small teams, big ideas!</p>
          </div>
        </div>

        <div class="layer" style="transform:translate3d(10px,10px,0) scale(1.05)">
          <div class="card-visual visual-feature">
            <h3>Featured Project</h3>
            <p>Increased brand lift/reach.</p>
          </div>
        </div>
      </div>
    </header>

    <!-- Portfolio -->
    <section aria-labelledby="works" style="display:flex;flex-direction:column;gap:12px">
      <div class="section-head">
        <h2 id="works" style="margin:0;color:#fff">Selected Work</h2>
        <div class="muted">A rotation selection of projects</div>
      </div>

      <div class="mosaic-wrap" role="list">
        <!-- 1 -->
        <article class="mosaic-card reveal-hidden" role="listitem" tabindex="0" aria-labelledby="m1">
          <img
            src="https://i.ibb.co/FmJFNyG/pexels-alexfu-1188751.jpg"
            srcset="
              https://i.ibb.co/FmJFNyG/pexels-alexfu-1188751.jpg 1200w,
              https://i.ibb.co/FmJFNyG/pexels-alexfu-1188751.jpg 800w,
              https://i.ibb.co/FmJFNyG/pexels-alexfu-1188751.jpg 480w
            "
            sizes="(max-width:600px) 100vw, (max-width:1080px) 48vw, 33vw"
            alt="Lunar Tea — Visual identity snapshot"
            loading="lazy" decoding="async" />
          <div class="mosaic-meta">
            <h5 id="m1">FrameCraft — Video Editing & Creation</h5>
            <p>Direction, cutting, effects, and final mastering.</p>
          </div>
        </article>

        <!-- 2 -->
        <article class="mosaic-card reveal-hidden" role="listitem" tabindex="0" aria-labelledby="m2">
          <img
            src="https://i.ibb.co/MDtH7tJ/pexels-caio-567592.jpg"
            srcset="
              https://i.ibb.co/MDtH7tJ/pexels-caio-567592.jpg 1200w,
              https://i.ibb.co/MDtH7tJ/pexels-caio-567592.jpg 800w,
              https://i.ibb.co/MDtH7tJ/pexels-caio-567592.jpg 480w
            "
            sizes="(max-width:600px) 100vw, (max-width:1080px) 48vw, 33vw"
            alt="A Quiet Moment — short film still"
            loading="lazy" decoding="async" />
          <div class="mosaic-meta">
            <h5 id="m2">PixelStory — Graphic Design</h5>
            <p>Layouts, illustrations, and creative visual storytelling.</p>
          </div>
        </article>

        <!-- 3 -->
        <article class="mosaic-card reveal-hidden" role="listitem" tabindex="0" aria-labelledby="m3">
          <img
            src="https://i.ibb.co/377ymhS/pexels-luis-gomes-166706-546819.jpg"
            srcset="
              https://i.ibb.co/377ymhS/pexels-luis-gomes-166706-546819.jpg 1200w,
              https://i.ibb.co/377ymhS/pexels-luis-gomes-166706-546819.jpg 800w,
              https://i.ibb.co/377ymhS/pexels-luis-gomes-166706-546819.jpg 480w
            "
            sizes="(max-width:600px) 100vw, (max-width:1080px) 48vw, 33vw"
            alt="Night Drive — studio console"
            loading="lazy" decoding="async" />
          <div class="mosaic-meta">
            <h5 id="m3">CodeForge — Coding & Programming</h5>
            <p>Development, optimization, and interactive solutions.</p>
          </div>
        </article>

        <!-- 4 -->
        <article class="mosaic-card reveal-hidden" role="listitem" tabindex="0" aria-labelledby="m4">
          <img
            src="https://i.ibb.co/5W0Fk6zK/8-AD61-AE4-4517-4146-BB8-E-503602-E29864.png"
            srcset="
              https://i.ibb.co/5W0Fk6zK/8-AD61-AE4-4517-4146-BB8-E-503602-E29864.png 1200w,
              https://i.ibb.co/5W0Fk6zK/8-AD61-AE4-4517-4146-BB8-E-503602-E29864.png 800w,
              https://i.ibb.co/5W0Fk6zK/8-AD61-AE4-4517-4146-BB8-E-503602-E29864.png 480w
            "
            sizes="(max-width:600px) 100vw, (max-width:1080px) 48vw, 33vw"
            alt="Trackr — product UI sample"
            loading="lazy" decoding="async" />
          <div class="mosaic-meta">
            <h5 id="m4">BrandAura — Branding & Visual Identity</h5>
            <p>Logo systems, style guides, and market presence.</p>
          </div>
        </article>
      </div>
    </section>

    <!-- Our Services: improved grid (separate from hero carousel) -->
    <section id="ourServices" aria-labelledby="ourServicesTitle">
      <h3 id="ourServicesTitle" style="margin:0;color:#fff">Our Services</h3>
      <div class="services-grid" role="list" aria-label="Detailed services">
        <div class="card" role="listitem">
          <h3>Graphic & Brand Designing</h3>
          <p>Logos, branding, and visual assets crafted to make an impact.</p>
        </div>
        <div class="card" role="listitem">
          <h3>Video & Effects Editing</h3>
          <p>Producing compelling visuals that speak to your audience.</p>
        </div>
        <div class="card" role="listitem">
          <h3>Music & Audio Editing</h3>
          <p>High-quality music production and sound engineering.</p>
        </div>
        <div class="card" role="listitem">
          <h3>Web & App Development</h3>
          <p>Custom websites, apps, and platforms built by expert developers.</p>
        </div>
        <div class="card" role="listitem">
          <h3>Digital Marketing</h3>
          <p>Targeted strategies for growth, visibility, and engagement.</p>
        </div>
      </div>
    </section>

    <!-- How we work -->
    <section aria-labelledby="how" style="display:flex;flex-direction:column;gap:12px">
      <div class="section-head">
        <h2 id="how" style="margin:0;color:#fff">How We Work</h2>
        <div class="muted">A simple, humane process</div>
      </div>

      <div class="timeline" role="list">
        <div class="tl-item reveal-hidden" role="listitem">
          <div class="tl-bullet" aria-hidden="true"></div>
          <div class="tl-body">
            <h6>Onboard & Assign</h6>
            <p>We listen, understand your vision and match you with the right expert.</p>
          </div>
        </div>

        <div class="tl-item reveal-hidden" role="listitem">
          <div class="tl-bullet" aria-hidden="true" style="background:var(--primary)"></div>
          <div class="tl-body">
            <h6>Manage & Review</h6>
            <p>We oversee project execution and quality control.</p>
          </div>
        </div>

        <div class="tl-item reveal-hidden" role="listitem">
          <div class="tl-bullet" aria-hidden="true" style="background:linear-gradient(90deg,var(--primary),var(--accent))"></div>
          <div class="tl-body">
            <h6>Build, Polish & Deliver</h6>
            <p>You get high-quality delivery, seamless iteration, and smooth handoff.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact footer -->
    <footer class="sitefoot" role="contentinfo" aria-labelledby="contactTitle">
      <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center">
        <div>
          <h3 id="contactTitle" style="margin:0;color:#fff">Ready to begin?</h3>
          <p class="muted">Tell us about your project and we'll reply within one business day.</p>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <a class="btn" href="https://wa.me/233540281796" target="_blank" rel="noopener noreferrer">Chat on WhatsApp</a>
          <a class="btn ghost" href="mailto:gomezrychmund244@gmail.com">Email Us</a>
        </div>
      </div>

      <div class="contact-row">
        <form id="microContact" class="micro-form small-panel" aria-label="Quick contact form">
          <input type="text" name="name" placeholder="Your name" aria-label="Your name" required />
          <input type="email" name="email" placeholder="Email" aria-label="Email address" required />
          <button class="btn" type="submit">Send</button>
        </form>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <small class="muted">© <span id="yr"></span> MediaCraft — All rights reserved</small>
        <small class="muted">Designed for accessibility & performance</small>
      </div>
    </footer>
  </main>

  <!-- Accessible modal (Hire form) -->
  <dialog id="hireModal" aria-labelledby="hireTitle">
    <form method="dialog" style="padding:18px;min-width:320px;max-width:620px;display:flex;flex-direction:column;gap:10px">
      <h3 id="hireTitle">Quick Brief</h3>
      <label>
        <span class="sr-only">Your name</span>
        <input name="fullname" placeholder="Your name" style="padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)" required />
      </label>
      <label>
        <span class="sr-only">Project summary</span>
        <textarea name="project" rows="4" placeholder="Short project summary" style="padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)" required></textarea>
      </label>

      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button class="btn" type="submit">Send</button>
        <button class="btn ghost" type="button" id="closeHire">Cancel</button>
      </div>
    </form>
  </dialog>

  <script>
    /* ======================================
       Interactions + accessibility (parallax improved)
       - Responsive parallax for .visual-stage layers:
         * Works on scroll (element vs viewport center)
         * Works with pointermove (mouse/touch) when interacting
         * Reduced magnitude on small screens
         * Smooth lerp via rAF for performance
       ====================================== */

    // Populate year
    var yrEl = document.getElementById('yr');
    if(yrEl) yrEl.textContent = new Date().getFullYear();

    // ---- Page progress (top) ----
    (function(){
      var progress = document.getElementById('progress');
      function update(){
        var scrolled = window.scrollY || window.pageYOffset;
        var height = document.documentElement.scrollHeight - window.innerHeight;
        var pct = height ? (scrolled / height) : 0;
        if(progress) progress.style.transform = 'scaleX(' + Math.min(Math.max(pct,0),1) + ')';
      }
      window.addEventListener('scroll', update, {passive:true});
      window.addEventListener('resize', update);
      update();
    })();

    // ---- Typing microcopy in hero ----
    (function(){
      var words = ['branding.', 'storytelling.', 'sound engineering.', 'graphic designing.', 'product thinking.', 'programming.'];
      var el = document.querySelector('.typewriter');
      if(!el) return;
      var i = 0, j = 0, forward = true, timeout = null;
      function tick(){
        var w = words[i];
        el.textContent = w.slice(0,j) + (j % 2 === 0 ? ' ' : '\u258F');
        if(forward){
          j++;
          if(j > w.length){ forward = false; timeout = setTimeout(tick, 900); return; }
        } else {
          j--;
          if(j === 0){ forward = true; i = (i+1) % words.length; }
        }
        timeout = setTimeout(tick, forward ? 90 : 30);
      }
      tick();
      window.addEventListener('beforeunload', function(){ if(timeout) clearTimeout(timeout); });
    })();

    // ---- Dialog controls, focus management, portfolio scroll ----
    (function(){
      var modal = document.getElementById('hireModal');
      var openBtn = document.getElementById('hireBtn');
      var close = document.getElementById('closeHire');
      var portfolioBtn = document.getElementById('portfolioBtn');

      var lastFocusedEl = null;

      // Open modal
      if(openBtn){
        openBtn.addEventListener('click', function(ev){
          if(typeof modal.showModal === 'function'){
            lastFocusedEl = document.activeElement;
            modal.showModal();
            var first = modal.querySelector('input,textarea,button');
            if(first) first.focus();
          } else {
            location.href = 'mailto:hello@mediacraft.example';
          }
        });
      }

      // Close modal
      if(close){
        close.addEventListener('click', function(){ if(typeof modal.close === 'function') modal.close(); });
      }
      if(modal){
        modal.addEventListener('close', function(){ if(lastFocusedEl && typeof lastFocusedEl.focus === 'function') lastFocusedEl.focus(); });
        modal.addEventListener('cancel', function(){ modal.close(); });
      }

      // Portfolio button scroll
      if(portfolioBtn){
        portfolioBtn.addEventListener('click', function(e){
          e.preventDefault();
          var target = document.getElementById('works');
          if(target){
            target.setAttribute('tabindex','-1');
            target.scrollIntoView({behavior:'smooth',block:'start'});
            setTimeout(function(){ target.focus(); target.removeAttribute('tabindex'); }, 500);
          }
        });
      }
    })();

    // ---- Mosaic subtle parallax on mousemove (with transform reset) ----
    (function(){
      var items = document.querySelectorAll('.mosaic-card');
      items.forEach(function(el){
        el.addEventListener('mousemove', function(e){
          var rect = el.getBoundingClientRect();
          var cx = rect.left + rect.width/2;
          var cy = rect.top + rect.height/2;
          var dx = (e.clientX - cx) / rect.width;
          var dy = (e.clientY - cy) / rect.height;
          var img = el.querySelector('img');
          if(img) img.style.transform = 'scale(1.03) translate(' + (dx * 6) + 'px, ' + (dy * 6) + 'px)';
        }, {passive:true});
        el.addEventListener('mouseleave', function(){
          var img = el.querySelector('img');
          if(img) img.style.transform = '';
        });
      });
    })();

    // ---- Improved visual-stage parallax (responsive) ----
    (function(){
      var visual = document.querySelector('.visual-stage');
      if(!visual) return;
      var layers = Array.from(visual.querySelectorAll('.layer'));
      var pointer = {x:0,y:0,active:false}; // normalized -1..1
      var needsUpdate = false;
      var rafId = null;

      // state used for smooth lerp
      layers.forEach(function(l){ l._tx = 0; l._ty = 0; l._cx = 0; l._cy = 0; });

      function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

      function computeTargets(){
        var rect = visual.getBoundingClientRect();
        var vx = window.innerWidth / 2;
        var vy = window.innerHeight / 2;
        var cx = rect.left + rect.width / 2;
        var cy = rect.top + rect.height / 2;

        // normalized offsets of visual-stage center relative to viewport center (-1..1)
        var normX = clamp((cx - vx) / vx, -1, 1);
        var normY = clamp((cy - vy) / vy, -1, 1);

        // combine with pointer when active (pointer has same range -1..1)
        var pX = pointer.active ? pointer.x : 0;
        var pY = pointer.active ? pointer.y : 0;

        // set target transforms per layer depending on depth and screen size
        var isSmall = window.innerWidth < 720;
        var baseMaxX = isSmall ? 8 : 20; // px max per depth 1
        var baseMaxY = isSmall ? 6 : 14;

        layers.forEach(function(l, idx){
          var depth = (idx + 1) / layers.length; // 0..1
          var tx = ( -normX * baseMaxX * depth ) + ( -pX * baseMaxX * depth );
          var ty = ( -normY * baseMaxY * depth ) + ( -pY * baseMaxY * depth );
          // small gentle scale variation for depth (optional)
          l._tx = tx;
          l._ty = ty;
          l._scale = 1 + (0.01 * depth);
        });

        needsUpdate = true;
        startLoop();
      }

      function startLoop(){
        if(rafId) return;
        function loop(){
          var still = true;
          layers.forEach(function(l){
            // lerp current transform toward target
            var cur = l._cx || 0;
            var t = l._tx || 0;
            var curY = l._cy || 0;
            var tY = l._ty || 0;

            // interpolation factor (fast but smooth)
            var ease = 0.16;
            var nx = cur + (t - cur) * ease;
            var ny = curY + (tY - curY) * ease;

            l._cx = nx;
            l._cy = ny;

            // apply transform
            var s = l._scale || 1;
            l.style.transform = 'translate3d(' + nx.toFixed(2) + 'px,' + ny.toFixed(2) + 'px,0) scale(' + s.toFixed(3) + ')';

            if(Math.abs(t - nx) > 0.05 || Math.abs(tY - ny) > 0.05) still = false;
          });

          if(!still){
            rafId = requestAnimationFrame(loop);
          } else {
            rafId = null;
            needsUpdate = false;
          }
        }
        rafId = requestAnimationFrame(loop);
      }

      // pointer (mouse & touch) handling using pointer events
      function onPointerMove(ev){
        // only respond while interacting over the visual area
        var rect = visual.getBoundingClientRect();
        var px = (ev.clientX - (rect.left + rect.width/2)) / (rect.width/2);
        var py = (ev.clientY - (rect.top + rect.height/2)) / (rect.height/2);
        pointer.x = clamp(px, -1, 1);
        pointer.y = clamp(py, -1, 1);
        pointer.active = true;
        computeTargets();
      }
      function onPointerLeave(){
        pointer.active = false;
        // recompute targets so movement from scroll/center takes effect again
        computeTargets();
      }

      // update on scroll / resize and initial compute
      window.addEventListener('scroll', computeTargets, {passive:true});
      window.addEventListener('resize', computeTargets);
      visual.addEventListener('pointermove', onPointerMove, {passive:true});
      visual.addEventListener('pointerleave', onPointerLeave);
      visual.addEventListener('pointercancel', onPointerLeave);

      // initial
      computeTargets();
    })();

    // ---- Reveal animations for timeline & mosaic (IntersectionObserver) ----
    (function(){
      var io = new IntersectionObserver(function(entries){
        entries.forEach(function(e){
          if(e.isIntersecting){
            e.target.classList.remove('reveal-hidden');
            e.target.style.transform = 'translateY(0)';
            e.target.style.opacity = '1';
            io.unobserve(e.target);
          }
        });
      }, {threshold:0.12});
      document.querySelectorAll('.mosaic-card,.tl-item').forEach(function(el){
        el.style.willChange = 'transform,opacity';
        io.observe(el);
      });
    })();

    // ---- Services carousel keyboard nav & accessible announce ----
    (function(){
      var track = document.querySelector('.services');
      if(!track) return;
      track.addEventListener('keydown', function(e){
        if(e.key === 'ArrowRight') track.scrollBy({left:260,behavior:'smooth'});
        if(e.key === 'ArrowLeft') track.scrollBy({left:-260,behavior:'smooth'});
      });
      track.setAttribute('tabindex','0');

      // live region for screen readers
      var live = document.createElement('div');
      live.setAttribute('aria-live','polite');
      live.className = 'sr-only';
      document.body.appendChild(live);

      var items = Array.from(track.querySelectorAll('.svc'));
      function announceCurrent(){
        var best = items[0], bestDist = Infinity;
        var rectTrack = track.getBoundingClientRect();
        var center = rectTrack.left + rectTrack.width / 2;
        items.forEach(function(it){
          var rect = it.getBoundingClientRect();
          var cx = rect.left + rect.width/2;
          var dist = Math.abs(cx - center);
          if(dist < bestDist){ bestDist = dist; best = it; }
        });
        var title = best.querySelector('h4') ? best.querySelector('h4').textContent : 'Service';
        live.textContent = 'Current service: ' + title;
      }

      var t = null;
      track.addEventListener('scroll', function(){
        clearTimeout(t);
        t = setTimeout(announceCurrent, 250);
      }, {passive:true});
      // initial
      announceCurrent();
    })();

    // ---- Micro form submit handler (UX only) ----
    (function(){
      var form = document.getElementById('microContact');
      if(!form) return;
      form.addEventListener('submit', function(e){
        e.preventDefault();
        var btn = form.querySelector('button');
        var orig = btn.textContent;
        btn.textContent = 'Sending...';
        btn.disabled = true;
        setTimeout(function(){
          btn.textContent = 'Sent';
          form.reset();
          setTimeout(function(){ btn.textContent = orig; btn.disabled = false; }, 1200);
        }, 800);
      });
    })();
  </script>
</body>
</html>
